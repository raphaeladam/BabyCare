USE [BabySitter]
GO

/****** Object:  Table [dbo].[BabySitter]    Script Date: 30/11/2017 20:27:34 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[BabySitter](
	[UserName] [nvarchar](50) NOT NULL,
	[Email] [nvarchar](50) NOT NULL,
	[FirstName] [nvarchar](50) NOT NULL,
	[LastName] [nvarchar](50) NOT NULL,
	[City] [nvarchar](50) NOT NULL,
	[PhoneNumber] [nvarchar](50) NOT NULL,
	[StreetNumber] [int] NOT NULL,
	[BirthDate] [time](7) NOT NULL,
 CONSTRAINT [PK_BabySitter] PRIMARY KEY CLUSTERED 
(
	[UserName] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO



USE [BabySitter]
GO

/****** Object:  Table [dbo].[Cities]    Script Date: 30/11/2017 20:29:29 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Cities](
	[City] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Cities] PRIMARY KEY CLUSTERED 
(
	[City] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

USE [BabySitter]
GO

/****** Object:  Table [dbo].[Parent]    Script Date: 30/11/2017 20:30:38 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Parent](
	[UserName] [nvarchar](50) NOT NULL,
	[Email] [nvarchar](50) NOT NULL,
	[FirstName] [nvarchar](50) NOT NULL,
	[LastName] [nvarchar](50) NOT NULL,
	[City] [nvarchar](50) NOT NULL,
	[PhoneNumber] [nvarchar](50) NOT NULL,
	[StreetNumber] [int] NOT NULL,
	[BirthDate] [time](7) NOT NULL,
 CONSTRAINT [PK_Parent] PRIMARY KEY CLUSTERED 
(
	[UserName] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Parent]  WITH CHECK ADD  CONSTRAINT [FK_Cities_Constraint] FOREIGN KEY([City])
REFERENCES [dbo].[Cities] ([City])
GO

ALTER TABLE [dbo].[Parent] CHECK CONSTRAINT [FK_Cities_Constraint]
GO

USE [BabySitter]
GO

/****** Object:  Table [dbo].[User]    Script Date: 30/11/2017 20:32:34 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[User](
	[UserName] [nvarchar](50) NOT NULL,
	[Password] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_User] PRIMARY KEY CLUSTERED 
(
	[UserName] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

USE [BabySitter]
GO

/****** Object:  Table [dbo].[Invitation]    Script Date: 30/11/2017 20:30:14 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Invitation](
	[InvitationNumber] [int] NOT NULL,
	[Status] [nvarchar](50) NOT NULL,
	[UserName] [nvarchar](50) NOT NULL,
	[LastName] [nvarchar](50) NOT NULL,
	[ActualDate] [time](7) NOT NULL,
	[InvitationDate] [time](7) NOT NULL,
	[StartingTime] [time](7) NOT NULL,
	[EndingTime] [time](7) NOT NULL,
 CONSTRAINT [PK_Invitation] PRIMARY KEY CLUSTERED 
(
	[InvitationNumber] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

USE [BabySitter]
GO

/****** Object:  Table [dbo].[Payment]    Script Date: 30/11/2017 20:31:27 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Payment](
	[PaymentNumber] [int] NOT NULL,
	[InvitationNumber] [int] NOT NULL,
	[PaymentItem] [nvarchar](50) NOT NULL,
	[CreditCardNumber] [int] NOT NULL,
	[Comments] [nvarchar](max) NULL,
 CONSTRAINT [PK_Payment] PRIMARY KEY CLUSTERED 
(
	[PaymentNumber] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO

USE [BabySitter]
GO

/****** Object:  Table [dbo].[BabySitterInvitation]    Script Date: 30/11/2017 20:28:57 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[BabySitterInvitation](
	[InvitationNumber] [int] NOT NULL,
	[Status] [nvarchar](50) NOT NULL,
	[UserName] [nvarchar](50) NOT NULL,
	[LastName] [nvarchar](50) NOT NULL,
	[ActualDate] [time](7) NOT NULL,
	[StartingTime] [time](7) NOT NULL,
	[EndingTime] [time](7) NOT NULL,
 CONSTRAINT [PK_BabySitterInvitation] PRIMARY KEY CLUSTERED 
(
	[InvitationNumber] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

USE [BabySitter]
GO

/****** Object:  Table [dbo].[ParentInvitation]    Script Date: 30/11/2017 20:31:02 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[ParentInvitation](
	[InvitationNumber] [int] NOT NULL,
	[Status] [nvarchar](50) NOT NULL,
	[UserName] [nvarchar](50) NOT NULL,
	[LastName] [nvarchar](50) NOT NULL,
	[ActualDate] [time](7) NOT NULL,
	[StartingTime] [time](7) NOT NULL,
	[EndingTime] [time](7) NOT NULL,
 CONSTRAINT [PK_ParentInvitation] PRIMARY KEY CLUSTERED 
(
	[InvitationNumber] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

USE [BabySitter]
GO

/****** Object:  Table [dbo].[PaymentItems]    Script Date: 30/11/2017 20:32:16 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[PaymentItems](
	[PaymentItem] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_PaymentItems] PRIMARY KEY CLUSTERED 
(
	[PaymentItem] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

USE [BabySitter]
GO

/****** Object:  Table [dbo].[UsersInvitation]    Script Date: 14/12/2017 20:11:04 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[UsersInvitation](
	[UserName] [nvarchar](50) NOT NULL,
	[InvitationNumber] [int] NOT NULL,
 CONSTRAINT [PK_UserandNumber] PRIMARY KEY CLUSTERED 
(
	[InvitationNumber] ASC,
	[UserName] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[UsersInvitation]  WITH CHECK ADD  CONSTRAINT [FK_ParentUsersInviatation_Constraint] FOREIGN KEY([InvitationNumber])
REFERENCES [dbo].[ParentInvitation] ([InvitationNumber])
GO

ALTER TABLE [dbo].[UsersInvitation] CHECK CONSTRAINT [FK_ParentUsersInviatation_Constraint]
GO

ALTER TABLE [dbo].[UsersInvitation]  WITH CHECK ADD  CONSTRAINT [FK_UsersInviatation_Constraint] FOREIGN KEY([UserName])
REFERENCES [dbo].[BabySitter] ([UserName])
GO

ALTER TABLE [dbo].[UsersInvitation] CHECK CONSTRAINT [FK_UsersInviatation_Constraint]
GO

ALTER TABLE [dbo].[BabySitter]  WITH CHECK ADD  CONSTRAINT [FK_User_Constraint] FOREIGN KEY([UserName])
REFERENCES [dbo].[User] ([UserName])

ALTER TABLE [dbo].[Parent]  WITH CHECK ADD  CONSTRAINT [FK_UserParent_Constraint] FOREIGN KEY([UserName])
REFERENCES [dbo].[User] ([UserName])

ALTER TABLE [dbo].[BabySitter]  WITH CHECK ADD  CONSTRAINT [FK_CityBabySitter_Constraint] FOREIGN KEY([City])
REFERENCES [dbo].[Cities] ([City])

ALTER TABLE [dbo].[Parent]  WITH CHECK ADD  CONSTRAINT [FK_CityParent_Constraint] FOREIGN KEY([City])
REFERENCES [dbo].[Cities] ([City])

ALTER TABLE [dbo].[ParentInvitation]  WITH CHECK ADD  CONSTRAINT [FK_ParentInvitation_Constraint] FOREIGN KEY([UserName])
REFERENCES [dbo].[Parent] ([UserName])

ALTER TABLE [dbo].[BabySitterInvitation]  WITH CHECK ADD  CONSTRAINT [FK_BabySitterInvitation_Constraint] FOREIGN KEY([UserName])
REFERENCES [dbo].[BabySitter] ([UserName])

ALTER TABLE [dbo].[Payment]  WITH CHECK ADD  CONSTRAINT [FK_Payment_Constraint] FOREIGN KEY([PaymentItem])
REFERENCES [dbo].[PaymentItems] ([PaymentItem])

ALTER TABLE [dbo].[Invitation]  WITH CHECK ADD  CONSTRAINT [FK_BabySitterInviatation_Constraint] FOREIGN KEY([UserName])
REFERENCES [dbo].[BabySitter] ([UserName])

ALTER TABLE [dbo].[UsersInvitation]  WITH CHECK ADD  CONSTRAINT [FK_UsersInviatation_Constraint] FOREIGN KEY([UserName])
REFERENCES [dbo].[BabySitter] ([UserName])

ALTER TABLE [dbo].[UsersInvitation]  WITH CHECK ADD  CONSTRAINT [FK_ParentUsersInviatation_Constraint] FOREIGN KEY([InvitationNumber])
REFERENCES [dbo].[ParentInvitation] ([InvitationNumber])

ALTER TABLE [dbo].[UsersInvitation] add CONSTRAINT PK_UserandNumber PRIMARY KEY (InvitationNumber,UserName)

ALTER TABLE [dbo].[Payment] ADD FOREIGN KEY (InvitationNumber) REFERENCES Invitation(InvitationNumber)

alter TABLE Invitation 
add constraint FK1 foreign key(InvitationNumber) references ParentInvitation(InvitationNumber)

ALTER TABLE [dbo].[BabySitter]  WITH CHECK ADD  CONSTRAINT [FK_CityBabySitter_Constraint] FOREIGN KEY([City])
REFERENCES [dbo].[Cities] ([City])

ALTER TABLE [dbo].[Payment] ADD FOREIGN KEY (InvitationNumber) REFERENCES Invitation(InvitationNumber)

ALTER TABLE [dbo].[Parent]  WITH CHECK ADD  CONSTRAINT [FK_UserParent_Constraint] FOREIGN KEY([UserName])
REFERENCES [dbo].[User] ([UserName])

ALTER TABLE [dbo].[BabySitter]  WITH CHECK ADD  CONSTRAINT [FK_User_Constraint] FOREIGN KEY([UserName])
REFERENCES [dbo].[User] ([UserName])

ALTER TABLE [dbo].[ParentInvitation]  WITH CHECK ADD  CONSTRAINT [FK_ParentInvitation_Constraint] FOREIGN KEY([UserName])
REFERENCES [dbo].[Parent] ([UserName])

alter TABLE Invitation 
add constraint FK1 foreign key(InvitationNumber) references ParentInvitation(InvitationNumber)

alter table Parent
add StreetName NVARCHAR(50)

alter table BabySitter
add StreetName NVARCHAR(50)

alter table parent
alter column BirthDate DateTime;

alter table BabySitter
alter column BirthDate DateTime;